
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Tracker Web App</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #f0f0f0;
    }

    .container {
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    .chapter {
      margin-bottom: 10px;
    }

    .topic-header {
      background-color: #1e1e1e;
      padding: 10px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 5px;
      margin-bottom: 5px;
    }

    .topic-header.gray {
      background-color: #444;
    }

    .topic-header.yellow {
      background-color: #996c00;
    }

    .topic-header.green {
      background-color: #2e7d32;
    }

    .checkbox-group {
      padding-left: 20px;
      display: none;
    }

    .progress-container {
      margin: 20px 0;
    }

    .progress-bar {
      height: 20px;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: #4caf50;
      text-align: center;
      line-height: 20px;
      color: #fff;
    }

    label {
      display: block;
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ“š Study Tracker</h1>
    <div class="progress-container">
      <a href="./Report.html" style="
  display: inline-block;
  padding: 12px 24px;
  background-color: #28a745;
  color: white;
  font-weight: bold;
  text-decoration: none;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease;
" onmouseover="this.style.backgroundColor='#218838'" onmouseout="this.style.backgroundColor='#28a745'">
  Report
      </a>
      <div class="progress-bar">
        <div id="globalProgress" class="progress-fill" style="width: 0%;">0%</div>
      </div>
      <div id="progressText">Progress: 0/0 checkboxes completed (0%)</div>
    </div>
    <div id="studyContent"></div>
  </div>

  <script>
  const DB_NAME = "StudyTrackerDB";
const DB_STORE = "checkboxes";
let db;

function openDB() {
Â  return new Promise((resolve, reject) => {
Â  Â  const request = indexedDB.open(DB_NAME, 1);
Â  Â  request.onerror = () => reject(request.error);
Â  Â  request.onsuccess = () => {
Â  Â  Â  db = request.result;
Â  Â  Â  resolve(db);
Â  Â  };
Â  Â  request.onupgradeneeded = (e) => {
Â  Â  Â  db = e.target.result;
Â  Â  Â  if (!db.objectStoreNames.contains(DB_STORE)) {
Â  Â  Â  Â  db.createObjectStore(DB_STORE);
Â  Â  Â  }
Â  Â  };
Â  });
}

function saveCheckboxState(key, state) {
Â  const tx = db.transaction(DB_STORE, "readwrite");
Â  const store = tx.objectStore(DB_STORE);
Â  store.put(state, key);
}

function loadCheckboxState(key) {
Â  return new Promise((resolve) => {
Â  Â  const tx = db.transaction(DB_STORE, "readonly");
Â  Â  const store = tx.objectStore(DB_STORE);
Â  Â  const request = store.get(key);
Â  Â  request.onsuccess = () => resolve(request.result || []);
Â  });
}

    const CHECKBOX_OPTIONS = [
      "Reading",
      "Reading Aloud",
      "Practicing Questions",
      "Case Study / Practical",
      "Wanted Doubts",
      "Teaching (Mistake Observation)",
      "Notes",
      "Chapter Revision / Revision 1",
      "Class Revision / Revision 2",
      "Final Revision / Revision 3",
    ];

    const data = { "Class 6": { "History â€“ Our Pasts â€“ I": [ "What, Where, How and When?", "On the Trail of the Earliest People", "From Gathering to Growing Food", "In the Earliest Cities", "What Books and Burials Tell Us", "Kingdoms, Kings and an Early Republic", "New Questions and Ideas", "Ashoka, The Emperor Who Gave Up War", "Vital Villages, Thriving Towns", "Traders, Kings and Pilgrims", "New Empires and Kingdoms", "Buildings, Paintings and Books" ], "Geography â€“ The Earth Our Habitat": [ "The Earth in the Solar System", "Globe: Latitudes and Longitudes", "Motions of the Earth", "Maps", "Major Domains of the Earth", "Major Landforms of the Earth", "Our Country â€“ India", "India: Climate, Vegetation and Wildlife" ], "Civics â€“ Social and Political Life â€“ I": [ "Understanding Diversity", "Diversity and Discrimination", "What is Government?", "Key Elements of a Democratic Government", "Panchayati Raj", "Rural Administration", "Urban Administration", "Rural Livelihoods", "Urban Livelihoods" ] }, "Class 7": { "History â€“ Our Pasts â€“ II": [ "Tracing Changes Through a Thousand Years", "New Kings and Kingdoms", "The Delhi Sultans", "The Mughal Empire", "Rulers and Buildings", "Towns, Traders and Craftspersons", "Tribes, Nomads and Settled Communities", "Devotional Paths to the Divine", "The Making of Regional Cultures", "Eighteenth-Century Political Formations" ], "Geography â€“ Our Environment": [ "Environment", "Inside Our Earth", "Our Changing Earth", "Air", "Water", "Natural Vegetation and Wildlife", "Human Environment â€“ Settlement, Transport and Communication", "Human-Environment Interactions â€“ The Tropical and the Subtropical Region", "Life in the Temperate Grasslands", "Life in the Deserts" ], "Civics â€“ Social and Political Life â€“ II": [ "On Equality", "Role of the Government in Health", "How the State Government Works", "Growing up as Boys and Girls", "Women Change the World", "Understanding Media", "Understanding Advertising", "Markets Around Us", "A Shirt in the Market" ] }, "Class 8": { "History â€“ Our Pasts â€“ III": [ "How, When and Where", "From Trade to Territory: The Company Establishes Power", "Ruling the Countryside", "Tribals, Dikus and the Vision of a Golden Age", "When People Rebel: 1857 and After", "Colonialism and the City", "Weavers, Iron Smelters and Factory Owners", "Civilising the 'Native', Educating the Nation", "Women, Caste and Reform", "The Changing World of Visual Arts", "The Making of the National Movement: 1870sâ€“1947", "India After Independence" ], "Geography â€“ Resources and Development": [ "Resources", "Land, Soil, Water, Natural Vegetation and Wildlife Resources", "Mineral and Power Resources", "Agriculture", "Industries", "Human Resources" ], "Civics â€“ Social and Political Life â€“ III": [ "The Indian Constitution", "Understanding Secularism", "Why Do We Need a Parliament?", "Understanding Laws", "Judiciary", "Understanding Our Criminal Justice System", "Understanding Marginalisation", "Confronting Marginalisation", "Public Facilities", "Law and Social Justice" ] }, "Class 9": { "History â€“ India and the Contemporary World â€“ I": [ "The French Revolution", "Socialism in Europe and the Russian Revolution", "Nazism and the Rise of Hitler", "Forest Society and Colonialism", "Pastoralists in the Modern World", "Peasants and Farmers" ], "Geography â€“ Contemporary India â€“ I": [ "India â€“ Size and Location", "Physical Features of India", "Drainage", "Climate", "Natural Vegetation and Wildlife", "Population" ], "Civics â€“ Democratic Politics â€“ I": [ "What is Democracy? Why Democracy?", "Constitutional Design", "Electoral Politics", "Working of Institutions", "Democratic Rights" ], "Economics â€“ Economics â€“ I": [ "The Story of Village Palampur", "People as Resource", "Poverty as a Challenge", "Food Security in India" ] }, "Class 10": { "History â€“ India and the Contemporary World â€“ II": [ "The Rise of Nationalism in Europe", "Nationalism in India", "The Making of a Global World", "The Age of Industrialisation", "Print Culture and the Modern World" ], "Geography â€“ Contemporary India â€“ II": [ "Resources and Development", "Forest and Wildlife Resources", "Water Resources", "Agriculture", "Minerals and Energy Resources", "Manufacturing Industries", "Lifelines of National Economy" ], "Civics â€“ Democratic Politics â€“ II": [ "Power Sharing", "Federalism", "Gender, Religion and Caste", "Political Parties", "Outcomes of Democracy", "Challenges to Democracy" ], "Economics â€“ Understanding Economic Development": [ "Development", "Sectors of the Indian Economy", "Money and Credit", "Globalisation and the Indian Economy", "Consumer Rights" ] } }


    const studyContent = document.getElementById("studyContent");
    let totalCheckboxes = 0;
    let checkedCheckboxes = 0;

    function createCheckbox(topicId, index, savedState) {
Â  const checkbox = document.createElement("input");
Â  checkbox.type = "checkbox";
Â  checkbox.dataset.topicId = topicId;
Â  checkbox.dataset.index = index;

Â  const label = document.createElement("label");
Â  label.appendChild(checkbox);
Â  label.append(" " + CHECKBOX_OPTIONS[index]);

Â  if (savedState.includes(index)) {
Â  Â  checkbox.checked = true;
Â  }

Â  checkbox.addEventListener("change", () => {
Â  Â  const checkboxes = document.querySelectorAll(`input[data-topic-id='${topicId}']`);
Â  Â  const newState = Array.from(checkboxes)
Â  Â  Â  .map((cb, i) => cb.checked ? i : null)
Â  Â  Â  .filter(i => i !== null);
Â  Â  saveCheckboxState(topicId, newState);
Â  Â  updateProgress();
Â  });

Â  return label;
}


    function updateProgress() {
      const checkboxes = document.querySelectorAll("input[type=checkbox]");
      checkedCheckboxes = Array.from(checkboxes).filter((cb) => cb.checked).length;
      totalCheckboxes = checkboxes.length;
      const percent = totalCheckboxes ? Math.round((checkedCheckboxes / totalCheckboxes) * 100) : 0;
      document.getElementById("globalProgress").style.width = percent + "%";
      document.getElementById("globalProgress").innerText = percent + "%";
      document.getElementById("progressText").innerText = `Progress: ${checkedCheckboxes}/${totalCheckboxes} checkboxes completed (${percent}%)`;

      document.querySelectorAll(".topic-header").forEach((header) => {
        const topicId = header.dataset.topicId;
        const checks = document.querySelectorAll(`input[data-topic-id='${topicId}']`);
        const completed = Array.from(checks).filter(cb => cb.checked).length;

        header.classList.remove("gray", "yellow", "green");
        if (completed === 0) header.classList.add("gray");
        else if (completed < 10) header.classList.add("yellow");
        else header.classList.add("green");
        header.querySelector(".status").innerText = `[${completed}/10 Completed âœ…]`;
      });
    }

    async function createStudyStructure() {
Â  await openDB(); // <-- Important

Â  let topicCounter = 0;
Â  for (const [className, subjects] of Object.entries(data)) {
Â  Â  const classHeader = document.createElement("h2");
Â  Â  classHeader.innerText = className;
Â  Â  studyContent.appendChild(classHeader);

Â  Â  for (const [subject, topics] of Object.entries(subjects)) {
Â  Â  Â  const subjectHeader = document.createElement("h3");
Â  Â  Â  subjectHeader.innerText = subject;
Â  Â  Â  studyContent.appendChild(subjectHeader);

Â  Â  Â  for (const topic of topics) {
Â  Â  Â  Â  const topicId = `topic-${topicCounter++}`;
Â  Â  Â  Â  const header = document.createElement("div");
Â  Â  Â  Â  header.className = "topic-header gray";
Â  Â  Â  Â  header.dataset.topicId = topicId;
Â  Â  Â  Â  header.innerHTML = `<strong>${topic}</strong> â€“ <span class="status">[0/10 Completed âœ…]</span>`;

Â  Â  Â  Â  const checkboxGroup = document.createElement("div");
Â  Â  Â  Â  checkboxGroup.className = "checkbox-group";

Â  Â  Â  Â  const savedState = await loadCheckboxState(topicId);
Â  Â  Â  Â  let completedCount = 0;

Â  Â  Â  Â  for (let i = 0; i < 10; i++) {
Â  Â  Â  Â  Â  const checkboxLabel = createCheckbox(topicId, i, savedState);
Â  Â  Â  Â  Â  if (savedState.includes(i)) completedCount++;
Â  Â  Â  Â  Â  checkboxGroup.appendChild(checkboxLabel);
Â  Â  Â  Â  }

Â  Â  Â  Â  if (completedCount === 0) header.classList.add("gray");
Â  Â  Â  Â  else if (completedCount < 10) header.classList.add("yellow");
Â  Â  Â  Â  else header.classList.add("green");
Â  Â  Â  Â  header.querySelector(".status").innerText = `[${completedCount}/10 Completed âœ…]`;

Â  Â  Â  Â  header.addEventListener("click", () => {
Â  Â  Â  Â  Â  checkboxGroup.style.display = checkboxGroup.style.display === "block" ? "none" : "block";
Â  Â  Â  Â  });

Â  Â  Â  Â  studyContent.appendChild(header);
Â  Â  Â  Â  studyContent.appendChild(checkboxGroup);
Â  Â  Â  }
Â  Â  }
Â  }
}


    (async () => {
Â  await createStudyStructure();
Â  updateProgress();
})();

  </script>
</body>
</html>
